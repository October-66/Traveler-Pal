{% extends "base.html" %}
{% load staticfiles %}
{% block title %}首页{% endblock %}

{% block content %}
<div class="form-login" onsubmit="return false">
  <form id="form-login">
    {% csrf_token %}
    <input name="username" id="username" holderplace="用户名">
    <input name="password" id="password" holderplace="密码">
    <button type="submit" id="submit-login">登录</button>
  </form>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
  $(function() {
    $("#submit-login").click(function() {

      $.ajax({
        type: "POST",
        url: "./login/",
        data: $("#form-login").serialize(),
        dataType: "json"
      }).done(function(data, textStatus, jqXHR) {
        if(jqXHR.status == 200) {
          if(data.status == 0) {
            alert("密码错误");
          } else if (data.status == 1) {
            alert("登录成功");
          }

        }

      }).done(function(jqXHR) {
        location.href = "./"
      });
    })
  })
</script>
{% endblock %}
